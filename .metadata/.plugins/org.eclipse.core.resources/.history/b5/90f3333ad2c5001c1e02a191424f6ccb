/*Ejercicio 2-3:
 Debemos alquilar el servicio de transporte para llegar a Mar del Plata con un grupo de personas, de cada persona debemos obtener los siguientes datos:
 número de cliente,
 estado civil ('s' para soltero", 'c' para casado o 'v' viudo),
 edad( solo mayores de edad, más de 17),
 temperatura corporal (validar por favor)
 y sexo ('f' para femenino, 'm' para masculino, 'o' para no binario).
 NOTA: el precio por pasajero es de $600.
 Se debe informar (solo si corresponde):
 a) La cantidad de personas con estado "viudo" de más de 60 años.
 b) el número de cliente y edad de la mujer soltera más joven.
 c) cuánto sale el viaje total sin descuento.
 d) si hay más del 50% de los pasajeros que tiene más de 60 años , el precio final tiene un descuento del 25%, que solo mostramos si corresponde.
 */
#include <stdio.h>
#include <stdlib.h>

#define PASAJE 600
#define DESCUENTO 0.25

int main(void) {
	setbuf(stdout, NULL);

	int numeroDeCliente, edad, personaViuda,pasajerosConDescuento,max, min,mujerVieja,mujerJoven,
	contadorDePasajeros, personasMayorA60,mujerSolteraMasJoven,flag;
	char estadoCivil, sexo,salir;
	float temperaturaCorporal, viajeTotalSinDescuento;

	personaViuda = 0;
	contadorDePasajeros = 0;
	personasMayorA60 = 0;
	flag = 1;
	mujerVieja = 0;
	mujerJoven = 0;


do{
	printf("ingrese numero de cliente:\n");
	scanf("%d",&numeroDeCliente);

	printf("ingrese su estado civil ('s' para soltero, 'c' para casado o 'v' viudo):\n");
	fflush(stdin);
	scanf("%c", &estadoCivil);

	while (estadoCivil != 's' && estadoCivil != 'c' && estadoCivil != 'v') {
		printf("ERROR, ingrese correctamente su estado civil ('s' para soltero, 'c' para casado o 'v' viudo):\n");
		fflush(stdin);
		scanf("%c", &estadoCivil);
	}

	printf("ingrese su edad:\n ");
	scanf("%d", &edad);

	while (edad <= 17) {
		printf("ud no puede viajar con esa edad, ud tiene que ser mayor de edad. porfavor ingrese su edad correctamente:\n");
		scanf("%d", &edad);
	}

	printf("ingrese temperatura corporal:\n");
	scanf("%f", &temperaturaCorporal);

	while (temperaturaCorporal > 38) {
		printf(
				"Ud tiene mas de 38 de temperatura y no podra viajar, por favor ingrese su temperatura:\n");
		scanf("%f", &temperaturaCorporal);
	}

	printf(
			"ingrese su sexo ('f' para femenino, 'm' para masculino, 'o' para no binario): \n");
	fflush(stdin);
	scanf("%c", &sexo);

	while (sexo != 'f' && sexo != 'm' && sexo != 'o') {
		printf("ERROR inserte su sexo correspondiente: \n");
		scanf("%c", &sexo);
	}
	//a) La cantidad de personas con estado "viudo" de más de 60 años.

	if (estadoCivil == 'v' && edad > 60) {
		personaViuda++;
	}

	//b) el número de cliente y edad de la mujer soltera más joven.

	if(flag == 1 && sexo == 'f' && estadoCivil == 's'){
		max = edad;
		min = edad;
		flag = 0;
		printf("%d, %d" , min, max);
	}else {
		if(edad > max){
			max = edad;
			mujerVieja = max;
			mujerVieja++;
		}if(edad < min){
			min = edad;
			mujerJoven = min;
			mujerJoven++;
		}
	printf("%d,%d" ,mujerJoven,mujerVieja);
	}
	//c) cuánto sale el viaje total sin descuento.

	contadorDePasajeros++;
	viajeTotalSinDescuento = contadorDePasajeros * PASAJE;

	 printf("Desea salir (s/n)?:\n");
	 fflush(stdin);
	 scanf("%c",&salir);

} while(salir != 's');

//d) si hay más del 50% de los pasajeros que tiene más de 60 años , el precio final tiene un descuento del 25%, que solo mostramos si corresponde.
	if (edad > 60) {
		 personasMayorA60++;
		if((( personasMayorA60 / contadorDePasajeros) * 100)){
		pasajerosConDescuento = (PASAJE * DESCUENTO) - PASAJE;

		printf("El precio final con descuento es de: $%d \n" ,pasajerosConDescuento);
	}
}


	printf("la cantidad de persona con estado viudo son: %d \n" ,personaViuda);
	printf("el numero de cliente es %d y edad de la mujer soltera mas joven es: %d \n", numeroDeCliente, mujerSolteraMasJoven);
	printf("el viaje total sin descuento sale :$%.2f \n" ,viajeTotalSinDescuento);



return 0;
}

